<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hypermedia Client Testing</title>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() {
        var element = document.getElementById("demo-app")
        Cignium.init(element, {
          endpoint: location.hash.substring(1),
          actionListPosition: 'bottom',
          onValueChange: (id, value) => {
            console.info(`id: '${id}' value: '${value}'`)
          },
          onUrlChange: (url) => {
            console.info(`url: '${url}'`)
          },
          onProcessComplete: (url, content) => {
            console.info('process complete - before url change')
            setTimeout(() => {
                console.info('process complete - after url change')
            });
            if (content)
                return {
                    title: 'Process Complete',
                    content: (content.match(/<body>((.|\r|\n)*)<\/body>/) || [])[1] || content
                };
          }
        })
      })

      window.addEventListener('hashchange', function () {
        Cignium.navigate(location.hash.substring(1))
      })
    </script>
    <script src="client.js"></script>
  </head>
  <body>
    <div id="demo-app"></div>
  </body>
</html>
